
### Synchronous programming

کدهای ما یکسری مراحل محاسبه متوالی هستند و هر عملیاتی مسدود می شود یعنی تا زمانی که یک عملیات به پایان نرسد امکان اجرای عملیات بعدی نیست. کدنویسی در این روش راحت است

### Asynchronous programming

در این برنامه نویسی، برخی از عملیات مانند خواندن از یک فایل یا انجام درخواست شبکه راه اندازی می شوند و سپس در پس زیمنه اجرا می شوند. وقتی یک عملیات ناهمزمان را اجرا می کنیم دستور بعدی بلافاصله اجزا می شوند حتی اگر دستور فعلی و قبلی هنوز به اتمام نرسیده باشند. ما به روشی نیاز داریم که هنگام تکمیل عملیات ناهمزمان به ما اطلاع دهد و سپس با استفاده از نتایج عملیات جریان اجرا را ادامه دهیم. 

### callback 
اصلی ترین مکانیزم یک عملیات ناهمزمان callback است که با نتایج عمل ناهمزمان در زمان اجرا فراخوانی می شود. دیگر مکانیزم های ناهمزمان براساس کال بک ساخته شده اند. الگوی Observer خیلی شبیه الگوی callback است (الگوی Observer توسط EventEmitter ساخته می شود) 

### The Callback pattern

کال بک به تحقق الگوی Reactor کمک میکند. کال بک ها توابعی هستند که برای انتشار نتیجه یک عملیات فراخو.انی می شوند. و این همان چیزی است که در برخورد با عملیات ناهمزمان نیاز داریم. در دنیای ناهمزمان انها جایگزین return میشوند. (دستور return همیشه به طور همزمان اجرا می شود) 

یکی دیگر از ساختارهای ایده ال برای اجرای برای کال بک closures است. راهنما: 

> https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures

### The continuation-passing style

یعنی سبک ادامه دار بودن. کال بک تابعی است که مقادیری را به عنوان ارگومان به تابع دیگری منتقل می کند. در برنامه نویسی فانکشنال این روش را سبک CPS می گویند. (فقط هم برای عملیات های ناهمزمان نیست این مفهوم). این سبک نشان می دهد که یک عملیات چگونه به تابع بعدی ارسال می شود بدون اینکه به صدازننده return شود

#### Synchronous CPS
سبک ادامه دار همزمان. 

```
function add (a, b) {
  return a + b
}
```

نتیجه با ریترن به صدازننده ارسال شده است. این روش مستقیم نامیده می شود و متداول ترین روش بازگشت در برنامه نویسی همزمان است. تبدیل کد بالا به یک cps:

```
function addCps (a, b, callback) {
  callback(a + b)
}
```

تابع بالا یک cps همزمان است. چون وقتی اجراش کامل میشه که اجرای کال بک نیز کامل شود. در کد زیر می بینید این مساله را:

```
console.log('before')
addCps(1, 2, result => console.log(`Result: ${result}`))
console.log('after')
```

خروجی اجرای کد بالا: 

```before
Result: 3
after
```

همونطور که می بینید خط سوم تا اجرای خط دوم متوقف شده است پس این کد همزمان است. 





# 01-sync-cps

This example demonstrates continuous passing with callbacks.

## Run

To run the example launch:

```bash
node index
```
